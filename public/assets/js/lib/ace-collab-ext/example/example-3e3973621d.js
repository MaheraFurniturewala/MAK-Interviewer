const sourceUser={id:"source",label:"Source User",color:"orange"},sourceEditor=initEditor("source-editor"),sourceSession=sourceEditor.getSession(),targetEditor=initEditor("target-editor");targetEditor.setReadOnly(!0);const targetCursorManager=new AceCollabExt.AceMultiCursorManager(targetEditor.getSession());targetCursorManager.addCursor(sourceUser.id,sourceUser.label,sourceUser.color,0);const targetSelectionManager=new AceCollabExt.AceMultiSelectionManager(targetEditor.getSession());targetSelectionManager.addSelection(sourceUser.id,sourceUser.label,sourceUser.color,[]);const radarView=new AceCollabExt.AceRadarView("target-radar-view",targetEditor);function initEditor(e){const o=ace.edit(e);o.setTheme("ace/theme/monokai");const t=o.getSession();return t.setMode("ace/mode/javascript"),t.setValue(editorContents),o}setTimeout((function(){radarView.addView("fake1","fake1","RoyalBlue",{start:60,end:75},50),radarView.addView("fake2","fake2","lightgreen",{start:10,end:50},30);const e=AceCollabExt.AceViewportUtil.getVisibleIndexRange(sourceEditor),o=AceCollabExt.AceViewportUtil.indicesToRows(sourceEditor,e.start,e.end);radarView.addView(sourceUser.id,sourceUser.label,sourceUser.color,o,0)}),0),sourceSession.getDocument().on("change",(function(e){targetEditor.getSession().getDocument().applyDeltas([e])})),sourceSession.on("changeScrollTop",(function(e){setTimeout((function(){const e=AceCollabExt.AceViewportUtil.getVisibleIndexRange(sourceEditor),o=AceCollabExt.AceViewportUtil.indicesToRows(sourceEditor,e.start,e.end);radarView.setViewRows(sourceUser.id,o)}),0)})),sourceSession.selection.on("changeCursor",(function(e){const o=sourceEditor.getCursorPosition();targetCursorManager.setCursor(sourceUser.id,o),radarView.setCursorRow(sourceUser.id,o.row)})),sourceSession.selection.on("changeSelection",(function(e){const o=AceCollabExt.AceRangeUtil.toJson(sourceEditor.selection.getAllRanges()),t=AceCollabExt.AceRangeUtil.fromJson(o);targetSelectionManager.setSelection(sourceUser.id,t)}));